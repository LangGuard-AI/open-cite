apiVersion: v1
kind: ConfigMap
metadata:
  name: opencite-config
  namespace: opencite
  labels:
    app.kubernetes.io/name: opencite
    app.kubernetes.io/component: api
data:
  # API Server
  OPENCITE_HOST: "0.0.0.0"
  OPENCITE_PORT: "8080"

  # OTLP Receiver (standalone on port 4318, not embedded on the API port)
  OPENCITE_OTLP_HOST: "0.0.0.0"
  OPENCITE_OTLP_PORT: "4318"
  OPENCITE_OTLP_EMBEDDED: "false"

  # Plugin toggles
  OPENCITE_ENABLE_OTEL: "true"
  OPENCITE_ENABLE_MCP: "true"
  OPENCITE_ENABLE_DATABRICKS: "false"
  OPENCITE_ENABLE_GOOGLE_CLOUD: "false"

  # Auto-start discovery
  OPENCITE_AUTO_START: "true"

  # Logging
  OPENCITE_LOG_LEVEL: "INFO"

  # Persistence (database-backed in K8s)
  OPENCITE_PERSISTENCE_ENABLED: "true"
  OPENCITE_DATABASE_URL: "postgresql://opencite:password@postgres:5432/opencite"
  OPENCITE_PERSIST_MAPPINGS: "false"

  # Google Cloud (non-sensitive)
  GCP_LOCATION: "us-central1"
